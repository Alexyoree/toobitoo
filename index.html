<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shop Login</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  </head>
  <body>
    <div class="login-container">
      <h2>Welcome to tobitto</h2>
      <form id="loginForm">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required />

        <label for="password">Password</label>
        <div class="password-input-container">
          <input type="password" id="password" name="password" required />
          <span
            class="toggle-password"
            id="togglePassword"
            onclick="togglePasswordVisibility()"
          >
            <i class="fas fa-eye-slash"></i>
            <i class="fas fa-eye" style="display: none"></i>
          </span>
        </div>
        <label> <input type="checkbox" id="rememberMe" /> Remember me </label>
        <button type="submit">Login</button>
        <div class="card">
          <div class="header">
            <div class="img-box">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path
                  d="M20.083 15.2l1.202.721a.5.5 0 0 1 0 .858l-8.77 5.262a1 1 0 0 1-1.03 0l-8.77-5.262a.5.5 0 0 1 0-.858l1.202-.721L12 20.05l8.083-4.85zm0-4.7l1.202.721a.5.5 0 0 1 0 .858L12 17.65l-9.285-5.571a.5.5 0 0 1 0-.858l1.202-.721L12 15.35l8.083-4.85zm-7.569-9.191l8.771 5.262a.5.5 0 0 1 0 .858L12 13 2.715 7.429a.5.5 0 0 1 0-.858l8.77-5.262a1 1 0 0 1 1.03 0zM12 3.332L5.887 7 12 10.668 18.113 7 12 3.332z"
                  fill="rgba(66,193,110,1)"
                ></path>
              </svg>
            </div>
            <span class="title"> Attentions </span>
          </div>

          <div class="content">
            <p>
              ini website buatan saya sendiri, saya sebagai yoressu selaku membuat web ini 
              mau mengatakan jika kurang bagus BUAT SENDIRI BOSSS!!!,
            </p>

            <a class="btn-link">Read More...</a>
          </div>
        </div>
      </form>
      <p id="errorMessage" class="error-message"></p>
    </div>

    <div class="banner">
      <video autoplay loop muted play-inline>
        <source src="assets/yanto.mp4" type="video/mp4" />
      </video>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", (event) => {
        const storedUsername = localStorage.getItem("username");
        const storedPassword = localStorage.getItem("password");

        // Check if it's the first login (no stored username and password)
        if (storedUsername && storedPassword) {
          document.getElementById("username").value = storedUsername;

          if (localStorage.getItem("rememberMe") === "true") {
            document.getElementById("password").value = storedPassword;
            document.getElementById("rememberMe").checked = true;
          }
        }

        document
          .getElementById("loginForm")
          .addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent form submission

            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const rememberMe = document.getElementById("rememberMe").checked;

            if (!storedUsername && !storedPassword) {
              // First time login, store the username and password
              localStorage.setItem("username", username);
              localStorage.setItem("password", password);

              if (rememberMe) {
                localStorage.setItem("rememberMe", true);
              }

              window.location.href = "login.html";
            } else {
              if (username === storedUsername && password === storedPassword) {
                if (rememberMe) {
                  localStorage.setItem("username", username);
                  localStorage.setItem("password", password);
                  localStorage.setItem("rememberMe", true);
                } else {
                  localStorage.removeItem("password");
                  localStorage.removeItem("rememberMe");
                }

                window.location.href = "login.html";
              } else {
                document.getElementById("errorMessage").textContent =
                  "Incorrect username or password";
              }
            }
          });
      });

      function togglePasswordVisibility() {
        const passwordInput = document.getElementById("password");
        const toggleBtn = document.getElementById("togglePassword");

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          toggleBtn.querySelector(".fa-eye-slash").style.display = "none";
          toggleBtn.querySelector(".fa-eye").style.display = "inline";
        } else {
          passwordInput.type = "password";
          toggleBtn.querySelector(".fa-eye-slash").style.display = "inline";
          toggleBtn.querySelector(".fa-eye").style.display = "none";
        }
      }
    </script>
  </body>
</html>
